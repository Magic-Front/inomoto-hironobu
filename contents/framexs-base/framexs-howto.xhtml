<?xml version="1.0"?>
<?xml-stylesheet type="application/xml" href="../../framexs.xsl"?>
<?framexs.skeleton ../../template/template.xhtml?>
<?framexs.properties ../../properties/properties.xml?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
<head>
<title>Framexs入門と利点</title>
<meta name="description" content="Framexsの始め方を通して利点を解説する。8つのコードでFramexsの利用方法及び利点を書く。"/>
<meta name="modified" content="2021/02/27"/>
<link rel="up" href="index.xhtml"/>
</head>
<body>
<article id="main">
<section>
<h2>事前の準備</h2>
<p>Framexsを動かすにはHTTPサーバーが必要です。<br />ローカルサーバー、もしくはレンタルサーバーを用意し、開発環境のルートディレクトリ（以下、ディレクトリ）を作成してください。</p>
  </section>
<section>
<h2>初めに</h2>
<p>以下のダウンロードリンクより、Framexsをダウンロードします。</p>
<ul>
<li><span sytle="font-weight:bold; font-size:105%;">
  <a href="https://inomoto-hironobu.github.io/framexs.zip" download="framexs.zip">Framexsをダウンロード</a></span>
  <span style="font-size:90%;">(4KB)</span></li>
</ul>
  <!--
  <a href="https://inomoto-hironobu.github.io/framexs.xsl">framexs.xsl</a>をダウンロードする。
-->  
 <p>
   ダウンロードしたフォルダを解凍し、中に入っているframexs.xsl、contents.xhtml、template.xhtmlを、以下の図のようにディレクトリに配置します。</p>
<ul class="branch_F">
<li class="branch_T"><span style="font-weight:bold; color:#633;">/framexs.xsl</span></li>
<li class="branch_T"><span style="font-weight:bold; color:#633;">/contents.xhtml</span></li>
<li class="branch_L"><span style="font-weight:bold; color:#633;">/template.xhtml</span></li>
</ul>

<!--
<figure id="コード2">
<figcaption>コード2</figcaption>
<pre><code class="language xml"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:framexs="urn:framexs" lang="ja">
<head>
<title> - テンプレートタイトル</title>
</head>
<body>
<h1>あいさつ</h1>
<article><p framexs:id-d="main">コンテンツのid属性がmainの部分を読み込み置き換える</p></article>
</body>
</html>]]></code></pre>
</figure>
-->

<p>Webブラウザで<kbd>/contents.xhtml</kbd>にアクセスし、各ブラウザに付属する管理者モードでソースを見てください。ソースコードが以下のように変わっています。</p>

<figure id="コード1">
<figcaption><b>/contents.xhtml</b>のソースコード</figcaption>
<pre><code class="language xml"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="application/xml" href="framexs.xsl"?>
<?framexs.skeleton template.xhtml?>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>世界よこんにちは</title>
</head>
<body>
<article id="main">
<p>ハローワールド！</p>
</article>
</body>
</html>]]></code></pre>
</figure>



<figure id="コード2">
<figcaption>template.xhtmlのソースコード</figcaption>
<pre><code class="language xml"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:framexs="urn:framexs" lang="ja">
<head>
<title> - テンプレートタイトル</title>
</head>
<body>
<h1>あいさつ</h1>
<article><p framexs:id-d="main">コンテンツのid属性がmainの部分を読み込み置き換える</p></article>
</body>
</html>]]></code></pre>
</figure>


<figure id="コード3">
<figcaption>実際にアクセスした<b>/contents.xhtml</b>のDOM</figcaption>
<pre><code class="language xml"><![CDATA[<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>世界よこんにちは - テンプレートタイトル</title>
</head>
<body>
<h1>あいさつ</h1>
<article>
<p>ハローワールド！</p>
</article>
</body>
</html>]]></code></pre>
</figure>
<p>Framexsにより<i>title</i>要素が合成され、タイトルが「世界よこんにちは - テンプレートタイトル」に変わっています。
<br />これは、テンプレートの <i>framexs:id-d="main"</i> の属性を持つ<i>p</i>要素が、コンテンツの <i>id="main"</i> 属性を持つ<i>article</i>要素の子要素へと置き換わっているからです。
<br />この<b>変換</b>がFramexsの基本的なシステムで、コンテンツの内容を変えなくても、テンプレートを変えるだけでページのレイアウト変更が可能になります。
<br />
ここから主にテンプレートを改造していきましょう。</p>
</section>
<section>
<h2>Fremexsページのテンプレート改造</h2>
<p>ここから、下記の図のようにディレクトリ構成を変更します。</p>
<ul class="branch_F">
<li class="branch_T">/framexs.xsl</li>
<li class="branch_T"><span class="branch_SF"></span>/contents</li><ul><li class="branch_IL">/contents.xhtml</li></ul>
<li class="branch_L"><span class="branch_SF"></span>/template</li><ul><li class="branch_L">/template.xhtml</li></ul>
</ul>
<p>/contents/contents.xhtmlを編集ソフトで開き、以下のコードをコピー＆ペーストして上書き保存します。</p>
<figure id="コード4">
<figcaption>contents.xhtml</figcaption>
<pre><code class="language xml"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="application/xml" href="framexs.xsl"?>
<?framexs.skeleton ../template/template.xhtml?>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>世界よこんにちは</title>
</head>
<body>
<article id="main">
<p>ハローワールド！</p>
</article>
</body>
</html>]]></code></pre>
</figure>
<p><code><![CDATA[<?framexs.skeleton ../template/template.xhtml?>]]></code>の部分が、最初のソースコードから変更された箇所です。
<br/>
ディレクトリ構成を変更すると、テンプレートを呼び出せなくなりエラーとなりますが、上記のようにURLを変更することで異なるディレクトリからも呼び出すことが可能です。
<kbd>/contents/contents.xhtml</kbd>にアクセスし、エラーが出ていないことを確認してみましょう。</p>
</section>
<section>
<h2>テンプレートの意義</h2>
<p>「/contents」ディレクトリに、新たに<b>content2.xhtml</b>を作成します。</p>
<ul class="branch_F">
<li class="branch_T">/framexs.xsl</li>
<li class="branch_T"><span class="branch_SF"></span>/contents</li><ul><li class="branch_IT">/contents.xhtml</li>
                      <li class="branch_IL">/contents2.xhtml</li></ul>
<li class="branch_L"><span class="branch_SF"></span>/template</li><ul><li class="branch_L">/template.xhtml</li></ul>
</ul>
<p><i>contents2.xhtml</i>を編集ソフトで開き、以下のコードをコピー＆ペーストして上書き保存します。</p>
<figure id="コード5">
<figcaption>contents2.xhtml</figcaption>
<pre><code class="language xml"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="application/xml" href="framexs.xsl"?>
<?framexs.skeleton ../template/template.xhtml?>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>今日の天気</title>
</head>
<body>
<article id="main">
<p>本日は晴天なり。</p>
</article>
</body>
</html>]]></code></pre>
</figure>
<p><kbd>/contents/contents2.xhtml</kbd>にアクセスしてコード6と同じHTMLのDOMができているか確認しよう。</p>
<figure id="コード6">
<figcaption>コード6</figcaption>
<pre><code class="language xml"><![CDATA[<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>今日の天気 - テンプレートタイトル</title>
</head>
<body>
<h1>あいさつ</h1>
<article>
<p>本日は晴天なり。</p>
</article>
</body>
</html>]]></code></pre>
</figure>
<p>上記の通り、コンテンツそのものは僅かなコードで構成され、テンプレートを共用すれば全体のイメージを統一することができる。
  <br />この状態でテンプレートを改造してみましょう。</p>
  
<h2>テンプレートの改造</h2>
  
<p><i>template.xhtml</i> を編集ソフトで開き、以下のコードをコピー＆ペーストして上書き保存します。</p>
<figure id="コード7">
<figcaption>template.xhtml</figcaption>
<pre><code class="language xml"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:framexs="urn:framexs" lang="ja">
<head>
<title> - テンプレートタイトル</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"/>
</head>
<body>
<div class="container">
<h1>あいさつ</h1>
<article class="bg-primary text-white"><p framexs:id-d="main">コンテンツのid属性がmainの部分を読み込み置き換える</p></article>
</div>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<!-- add after bootstrap.min.css -->
</body>
</html>]]></code></pre>
</figure>
<p>Webブラウザで<kbd>contents2.xhtml</kbd>にアクセスし、ソースを見てください。ソースコードが以下のように変わっています。</p>
<figure id="コード8">
<figcaption>実際にアクセスした<b>contents2.xhtml</b>のDOM</figcaption>
<pre><code class="language xml"><![CDATA[<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>今日の天気 - テンプレートタイトル</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"/>
</head>
<body>
<div class="container">
<h1>あいさつ</h1>
<article class="bg-primary text-white">
<p>本日は晴天なり。</p>                     
</article>
</div>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>
</html>]]></code></pre>
</figure>
<p>表示されたページのソースコードはFramexsの働きで書き換えられてはいるが、<i>contents2.xhtml</i>のソースコードには手を加えていないことに注目してほしい。
  <br />Framexsで管理したサイトの基盤となるHTMLは、テンプレートを改造することで全てのページに適用されます。従来のWebサイトで同じ工程を行うには、全てのページで変更する必要があります。<br />その煩わしい作業をなくし、Webページ全体のカスタマイズを少ない工程で容易に実現します。</p>
</section>
</article>
</body>
</html>
